"use strict";(self.webpackChunkcatenax_ng=self.webpackChunkcatenax_ng||[]).push([[5642],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var o=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=o.createContext({}),l=function(e){var t=o.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),d=l(r),m=n,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return r?o.createElement(f,i(i({ref:t},c),{},{components:r})):o.createElement(f,i({ref:t},c))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=d;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:n,i[1]=p;for(var l=2;l<a;l++)i[l]=r[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}d.displayName="MDXCreateElement"},6581:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>p,toc:()=>l});var o=r(7462),n=(r(7294),r(3905));const a={title:"How to manage forked repositories from eclipse-tractusx"},i=void 0,p={unversionedId:"internal/how-to-setup-forked-repo",id:"internal/how-to-setup-forked-repo",title:"How to manage forked repositories from eclipse-tractusx",description:"This guide is only for those who operate the environment",source:"@site/docs/internal/how-to-setup-forked-repo.md",sourceDirName:"internal",slug:"/internal/how-to-setup-forked-repo",permalink:"/docs/internal/how-to-setup-forked-repo",draft:!1,editUrl:"https://github.com/catenax-ng/catenax-ng.github.io/edit/main/docs/internal/how-to-setup-forked-repo.md",tags:[],version:"current",frontMatter:{title:"How to manage forked repositories from eclipse-tractusx"},sidebar:"tutorialSidebar",previous:{title:"How to setup GitHub apps",permalink:"/docs/internal/how-to-setup-apps"},next:{title:"How to setup Hashicorp Vault",permalink:"/docs/internal/how-to-setup-hashicorp-vault"}},s={},l=[{value:"Fork a repository from eclipse-tractusx",id:"fork-a-repository-from-eclipse-tractusx",level:2},{value:"Add the repository and which team can maintain it into terraform script",id:"add-the-repository-and-which-team-can-maintain-it-into-terraform-script",level:2},{value:"Add Repository",id:"add-repository",level:3},{value:"Add Repository &amp; Team Mapping",id:"add-repository--team-mapping",level:3},{value:"Import the state of existing forked repository",id:"import-the-state-of-existing-forked-repository",level:2}],c={toc:l};function u(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,o.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"This guide is only for those who operate the environment")),(0,n.kt)("p",null,"This how-to will guide you through the the steps to managed a forked repositories from eclipse-tractusx into catena-x organization"),(0,n.kt)("h2",{id:"fork-a-repository-from-eclipse-tractusx"},"Fork a repository from eclipse-tractusx"),(0,n.kt)("p",null,"You should start off manually fork a repository into catena-x organization. Please make sure to use prefix ",(0,n.kt)("inlineCode",{parentName:"p"},"tx")," for the name of repository in catena-x.\n",(0,n.kt)("img",{alt:"ForkRepo",src:r(2625).Z,width:"800",height:"528"})),(0,n.kt)("h2",{id:"add-the-repository-and-which-team-can-maintain-it-into-terraform-script"},"Add the repository and which team can maintain it into terraform script"),(0,n.kt)("h3",{id:"add-repository"},"Add Repository"),(0,n.kt)("p",null,"Add the repository configuration into this ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/catenax-ng/k8s-cluster-stack/blob/main/terraform/100_team_onboarding/main.tf"},"script")," under ",(0,n.kt)("inlineCode",{parentName:"p"},"github_repositories"),".\nThe example looks like this:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'"tx-portal-backend" : {\n      name : "tx-portal-backend"\n      team_name : "product-portal"\n      description : ""\n      visibility : "public"\n      homepage_url : ""\n      topics : []\n      pages : {\n        enabled : false\n        branch : ""\n      }\n      is_template : false\n      uses_template : false\n      template : null\n      codeowners_available : false\n      codeowners : null\n    }\n')),(0,n.kt)("p",null,"Please make sure you adjust the example to the actual repository settings."),(0,n.kt)("h3",{id:"add-repository--team-mapping"},"Add Repository & Team Mapping"),(0,n.kt)("p",null,"And add the mapping of team to repository under ",(0,n.kt)("inlineCode",{parentName:"p"},"github_repositories_teams")," like following:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'"tx-portal-backend-product-portal" : {\n    team_name : "product-portal"\n    repository : "tx-portal-backend"\n    permission : "maintain"\n}\n')),(0,n.kt)("h2",{id:"import-the-state-of-existing-forked-repository"},"Import the state of existing forked repository"),(0,n.kt)("p",null,"Following the guide ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/catenax-ng/k8s-cluster-stack/tree/main/terraform/100_team_onboarding"},"here")," to set up the credentials for running terraform\nNow you may import the forked github repository from ",(0,n.kt)("a",{parentName:"p",href:"#fork-a-repository-from-eclipse-tractusx"},"previous step"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"# Import a GitHub repository\nterraform import 'module.github.github_repository.repositories[\"map-key-in-github_repositories-var\"]' <repository-name>\n")),(0,n.kt)("p",null,"After the state of repository has been imported successfully. You might run the terraform plan:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"terraform plan -out tf.plan\n")),(0,n.kt)("p",null,"Observe the differences between the current and the desired state of the repository and make change to the desired state if necessary."),(0,n.kt)("p",null,"Last but not least, follow the git workflow to have the changes approval and merged and in the end, run the following command to apply the changes"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'terraform apply "tf.plan"\n')))}u.isMDXComponent=!0},2625:(e,t,r)=>{r.d(t,{Z:()=>o});const o=r.p+"assets/images/fork-github-repo-6773eda465b083e43cbef8c0a0222a46.png"}}]);