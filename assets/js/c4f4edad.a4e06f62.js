"use strict";(self.webpackChunkcatenax_ng=self.webpackChunkcatenax_ng||[]).push([[3647],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=o.createContext({}),s=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},c=function(e){var t=s(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),h=s(a),d=n,y=h["".concat(l,".").concat(d)]||h[d]||u[d]||i;return a?o.createElement(y,r(r({ref:t},c),{},{components:a})):o.createElement(y,r({ref:t},c))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,r=new Array(i);r[0]=h;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:n,r[1]=p;for(var s=2;s<i;s++)r[s]=a[s];return o.createElement.apply(null,r)}return o.createElement.apply(null,a)}h.displayName="MDXCreateElement"},9771:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>p,toc:()=>s});var o=a(7462),n=(a(7294),a(3905));const i={title:"How to deploy an application on 'Hotel Budapest'"},r=void 0,p={unversionedId:"guides/how-to-deploy-an-application",id:"guides/how-to-deploy-an-application",title:"How to deploy an application on 'Hotel Budapest'",description:'This guide is a small "how-to" about deploying applications with ArgoCD.',source:"@site/docs/guides/how-to-deploy-an-application.md",sourceDirName:"guides",slug:"/guides/how-to-deploy-an-application",permalink:"/docs/guides/how-to-deploy-an-application",draft:!1,editUrl:"https://github.com/catenax-ng/catenax-ng.github.io/edit/main/docs/guides/how-to-deploy-an-application.md",tags:[],version:"current",frontMatter:{title:"How to deploy an application on 'Hotel Budapest'"},sidebar:"tutorialSidebar",previous:{title:"How to trigger a workflow in another repository",permalink:"/docs/guides/how-to-cross-repo-workflow-dispatch"},next:{title:"How to expose your app to the internet",permalink:"/docs/guides/how-to-expose-an-app-to-the-internet"}},l={},s=[{value:"Specify application metadata",id:"specify-application-metadata",level:2},{value:"Specify Git repository URL containing your helm chart",id:"specify-git-repository-url-containing-your-helm-chart",level:2},{value:"Specify destination namespace",id:"specify-destination-namespace",level:2},{value:"Specify helm values for your deployment",id:"specify-helm-values-for-your-deployment",level:2},{value:"Sync your application resources",id:"sync-your-application-resources",level:2}],c={toc:s};function u(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,o.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,'This guide is a small "how-to" about deploying applications with ArgoCD.\nFollowing prerequisites have to be met:'),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"You need to be member of the ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/catenax-ng"},"catenax-ng GitHub organization")," and\na ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/orgs/catenax-ng/teams"},"product team")),(0,n.kt)("li",{parentName:"ul"},"Your application's docker images need to be accessible",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"as public ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/orgs/catenax-ng/packages"},"package on GitHub")," ..."),(0,n.kt)("li",{parentName:"ul"},"or on ",(0,n.kt)("em",{parentName:"li"},"cxtsiacr.azurecr.io")," -> not recommended, since no scans can be done on these images"),(0,n.kt)("li",{parentName:"ul"},"or as private ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/orgs/catenax-ng/packages"},"package on GitHub")," -> ",(0,n.kt)("a",{parentName:"li",href:"how-to-prepare-a-private-repo"},"How to Access a Private Repo and a Private Package/Image")))),(0,n.kt)("li",{parentName:"ul"},"If your GitHub repository is set to private, you first have to process the steps documented\nhere: ",(0,n.kt)("a",{parentName:"li",href:"how-to-prepare-a-private-repo"},"prepare for private repos")),(0,n.kt)("li",{parentName:"ul"},"An ArgoCD project needs to be created by the DevSecOps team for you.")),(0,n.kt)("p",null,"If these prerequisites are met, you can log in to ArgoCD with your GitHub account\nhere: ",(0,n.kt)("a",{parentName:"p",href:"https://argo.int.demo.catena-x.net/applications"},"https://argo.int.demo.catena-x.net/")),(0,n.kt)("h2",{id:"specify-application-metadata"},"Specify application metadata"),(0,n.kt)("p",null,"After logging in to ArgoCDs UI, you'll see an overview of all already existing Applications. To create a new one, click\nthe\n",(0,n.kt)("em",{parentName:"p"},"NEW APP")," button on the top left. You'll need to choose an application name, which is used to display the application on\nArgoCD's application overview. Also, you have to select the project that was created for your team, since this will be\nthe\nonly one that your user has privileges for to create applications. The following example shows, how the UI for creating\nan\napplication looks like:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Add application metadata",src:a(1231).Z,width:"1398",height:"646"})),(0,n.kt)("p",null,"Beside application name and project, the attribute ",(0,n.kt)("em",{parentName:"p"},"sync policy")," is interesting to choose carefully. There are two\noptions\n",(0,n.kt)("em",{parentName:"p"},"Manual")," and ",(0,n.kt)("em",{parentName:"p"},"Automatic"),". The ",(0,n.kt)("em",{parentName:"p"},"Manual")," sync policy means, that you are in full control of when kubernetes resources you\ndefined\nin your GitHub repository are being created. ",(0,n.kt)("em",{parentName:"p"},"Automatic")," on the other hand tells ArgoCD to watch your Git repository.\nOn a regular basis, it checks for changes in the git history and will auto-apply the resources if there are any."),(0,n.kt)("h2",{id:"specify-git-repository-url-containing-your-helm-chart"},"Specify Git repository URL containing your helm chart"),(0,n.kt)("p",null,"Scrolling to the next section of the ",(0,n.kt)("em",{parentName:"p"},"NEW APP")," dialog, you'll find the source attributes. This is where you define the\nURL to your Git repository and also the revision. The revision is usually set to ",(0,n.kt)("em",{parentName:"p"},"HEAD"),", since you want to deploy the\nlatest\nversion of your application. You could also choose a specific branch or even a specific tag, when you change the\ndropdown at the end of the revision row from ",(0,n.kt)("em",{parentName:"p"},"Branches")," to ",(0,n.kt)("em",{parentName:"p"},"Tags"),". This option can be useful for integration\nenvironments,\nwhere you want to provide other teams with specific stable versions of your app."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"HINT:")," If you are using private repositories and cannot set it to public, get in contact with the DevSecOps team,\nand we will\nconfigure repository access for ArgoCD")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Specify application source",src:a(9897).Z,width:"1511",height:"421"})),(0,n.kt)("p",null,"We highly encourage you, to specify your application deployments as a helm chart. Thereby the repository and path\ncombination\nshould point to the location of your helm chart.\nArgoCD also supports you by scanning the repository once you entered the repository URL and auto-suggests a path with\nvalid deployment specifications."),(0,n.kt)("h2",{id:"specify-destination-namespace"},"Specify destination namespace"),(0,n.kt)("p",null,"The next section of settings is about the destination. The destination is the kubernetes cluster and namespace, that\nArgoCD\nshould deploy your application to. On Hotel Budapest you are only allowed to deploy applications to the cluster, ArgoCD\nis running on.\nTo specify that cluster, choose ",(0,n.kt)("inlineCode",{parentName:"p"},"https://kubernetes.default.svc")," as the cluster URL."),(0,n.kt)("p",null,"As namespace, you need to specify one, that is assigned to your project that you selected previously in the application\nmetadata.\nEach product team usually has one project assigned and each project is allowed to use one namespace. The name of the\nnamespace\nis usually ",(0,n.kt)("inlineCode",{parentName:"p"},"product-<team-name>"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"If you are unsure, what your assigned namespace is, you can either ask the DevSecOps team, or look at ArgoCDs Setting>\nProjects\npage. There you will find your project and the associated namespaces.")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Specify destination namespace",src:a(2428).Z,width:"1135",height:"301"})),(0,n.kt)("h2",{id:"specify-helm-values-for-your-deployment"},"Specify helm values for your deployment"),(0,n.kt)("p",null,"The last section, when creating an application contains deployment specific settings. If you pointed ArgoCD to a\ndirectory\ncontaining a helm chart (as we encourage you to), you will be able to specify the values.yaml file to use,\nor even in-place values, like in the following screenshot."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Specify helm values",src:a(4372).Z,width:"1137",height:"265"})),(0,n.kt)("p",null,"Typically, you would want a specific values.yaml file named like ",(0,n.kt)("inlineCode",{parentName:"p"},"values-<env-name>.yaml")," that overwrites just the\nenvironment specifics and select both, the ",(0,n.kt)("inlineCode",{parentName:"p"},"values.yaml")," and the ",(0,n.kt)("inlineCode",{parentName:"p"},"values-<env-name>.yaml")," files as values files\nin ArgoCD."),(0,n.kt)("p",null,"If you specified all the settings, you can create the application, by clicking the ",(0,n.kt)("em",{parentName:"p"},"Create")," button on the top of the new\napp dialog."),(0,n.kt)("h2",{id:"sync-your-application-resources"},"Sync your application resources"),(0,n.kt)("p",null,"After app creation, you'll find your application with a yellow bar and the status 'OutOfSync' on ArgoCDs application\noverview."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Unsynced app",src:a(8857).Z,width:"377",height:"302"})),(0,n.kt)("p",null,"By clicking the 'Sync' button, you can tell ArgoCD to create all the kubernetes resources defined in your GitHub\nrepository.\nThis process can take a while. If successful, you'll see the application turning from yellow and OutOfSync to\ngreen and Synced. You can also click on the application to open the details page.\nThis will show you a graph of all the resource created."),(0,n.kt)("p",null,"Clicking on one of the nodes will provide you with resource type specific features like for example logs for pods."))}u.isMDXComponent=!0},2428:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/new_application_destination-c5ce01ef895c8caf8e7961604afc9600.png"},4372:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/new_application_helm_values-096e4e20566116bebb2492bf92330b63.png"},1231:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/new_application_metadata-e7633095ef63c5ca62e2545d2f9ca450.png"},9897:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/new_application_source-cd243c68c104629b6a32ab7fb75ac644.png"},8857:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/new_application_unsynced_app-7a23f70acaf0ef481d7fd27a3d6c6fd3.png"}}]);